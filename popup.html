<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Proxy Test Results</title>
        <style>
            :root {
                --primary-color: #2196f3;
                --primary-hover: #1976d2;
                --stop-color: #f44336;
                --stop-hover: #d32f2f;
                --text-color: #333;
                --bg-color: #f8f9fa;
                --border-color: #e0e0e0;
                --table-header-bg: #f1f3f5;
                --row-hover: #f8f9fa;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
                margin: 0;
                padding: 16px;
                width: 600px; /* Fixed width for consistency */
                color: var(--text-color);
                background-color: #fff;
                box-sizing: border-box;
            }

            h3 {
                margin: 0 0 16px 0;
                font-size: 18px;
                font-weight: 600;
                display: flex;
                align-items: center;
                justify-content: space-between;
            }

            .toolbar {
                margin-bottom: 16px;
                display: flex;
                align-items: center;
                gap: 12px;
            }

            button {
                padding: 4px 8px;
                border: none;
                border-radius: 6px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                transition: background-color 0.2s, transform 0.1s;
                background-color: var(--primary-color);
                color: white;
            }

            button:hover {
                background-color: var(--primary-hover);
            }

            button:active {
                transform: scale(0.98);
            }

            button.running {
                background-color: var(--stop-color);
            }

            button.running:hover {
                background-color: var(--stop-hover);
            }

            #progressText {
                font-size: 14px;
                font-weight: 600;
                color: var(--primary-color);
                flex: 1;
                text-align: right;
            }

            #results {
                border: 1px solid var(--border-color);
                border-radius: 8px;
                overflow: hidden;
                font-size: 12px;
            }

            .results-header {
                display: flex;
                padding: 8px 12px;
                background-color: var(--table-header-bg);
                border-bottom: 1px solid var(--border-color);
                font-weight: 600;
                color: #555;
            }

            .result-row {
                display: flex;
                padding: 8px 12px;
                border-bottom: 1px solid #f0f0f0;
                transition: background-color 0.15s;
            }

            .result-row:last-child {
                border-bottom: none;
            }

            .result-row:hover {
                background-color: var(--row-hover);
            }

            .header-cell,
            .cell {
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                box-sizing: border-box;
                flex-shrink: 0;
            }

            /* Column Widths */
            .domain-cell {
                flex: 1;
                min-width: 150px;
                text-align: left;
                padding-right: 10px;
            }
            .status-cell {
                min-width: 80px;
                text-align: center;
                /* Allow long text (non-numeric status) to show */
                text-overflow: ellipsis; 
            }
            .duration-cell {
                width: 80px;
                text-align: right;
            }
            .size-cell {
                width: 80px;
                text-align: right;
            }
            .speed-cell {
                width: 90px;
                text-align: right;
            }

            /* Status Colors */
            .status-200 { color: #2e7d32; font-weight: 500; } /* Green */
            .status-error { color: #d32f2f; font-weight: 500; } /* Red */
            .status-timeout { color: #f57c00; font-weight: 500; } /* Orange */
            .status-pending { color: #757575; } /* Grey */

            a {
                color: var(--primary-color);
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }

            /* Empty State */
            .empty-state {
                padding: 30px;
                text-align: center;
                color: #888;
                font-style: italic;
            }
            
            /* Meta info lines */
            .meta-line {
                padding: 8px 12px;
                border-bottom: 1px solid #eee;
                background: #fff;
                color: #666;
            }
        </style>
    </head>
    <body>
        <h3>
            <span data-i18n="popupTitle">Proxy Test Results</span>
        </h3>
        <div class="toolbar">
            <button id="startTestBtn" data-i18n="testCurrentPage">Test Current Page</button>
            <div id="progressText"></div>
        </div>
        <div id="results">
            <div class="empty-state" data-i18n="emptyStateStart">Click the button above to start testing</div>
        </div>
        <script src="popup.js"></script>
    </body>
</html>
